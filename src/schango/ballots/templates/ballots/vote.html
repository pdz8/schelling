{% extends "base.html" %}
{% load staticfiles %}

{% block headstuff %}
<script src="{% static 'ballots/vote.js' %}"></script>
{% endblock %}

{% block content_title %}
Vote
{% endblock %}

{% block explore_tab_class %}
active
{% endblock %}

{% block content %}

<div class="panel panel-default panel-body">
  <label>Question</label>
  <h4 class="not-hdr">{{ b.question }}</h4>
</div>

{% if committing or revealing or redeeming %}
<div class="panel panel-default panel-body">
  <form role="form" action="{% url 'ballots:hex' b.address %}" method="post">
    {% csrf_token %}

    {% if committing %}
      <div class="form-group">
        {{ f.secret_key.errors }}
        {{ f.secret_key.label_tag }}
        {{ f.secret_key }}
        {# <p>Note: We will never store your key on our server.</p> #}
      </div>
    {% endif %}

    {% if committing or revealing %}
      <div class="row">
        <div class="form-group col-sm-6">
          {{ f.vote_val.errors }}
          {{ f.vote_val.label_tag }}
          {{ f.vote_val }}
        </div>
        <div class="form-group col-sm-6">
          {{ f.nonce.errors }}
          {{ f.nonce.label_tag }}
          {{ f.nonce }}
        </div>
      </div>
    {% endif %}

    {% if committing %}
    <button type="submit" class="btn btn-default">Commit To Vote</button>
    {% elif revealing %}
    <button type="submit" class="btn btn-default">Reveal Vote</button>
    {% endif %}

  </form>
</div>
{% endif %}

<div id="tech_panel" class="panel panel-default panel-body" hidden>
  
  <label>Contract Address</label>
  <h4 class="not-hdr">{{ b.address }}</h4>

  <div class="row">
    <div class="col-sm-4">
      <label>Max Option</label>
      <h4 class="not-hdr">{{ b.max_choice }}</h4>
    </div>
    <div class="col-sm-8">
      <label>Deposit (ether)</label>
      <h4 class="not-hdr">{{ b.down_payment }}</h4>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4">
      <label>Start Time</label>
      <h4 class="not-hdr">{{ b.start_time }}</h4>
    </div>
    <div class="col-sm-4">
      <label>Reveal Time</label>
      <h4 class="not-hdr">{{ b.reveal_time }}</h4>
    </div>
    <div class="col-sm-4">
      <label>Redeem Time</label>
      <h4 class="not-hdr">{{ b.redeem_time }}</h4>
    </div>
  </div>

</div>
<a id="show_more">Show more</a>

{% endblock %}
